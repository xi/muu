(function(q,p,m){(function(l){"function"===typeof define&&define.amd?define("muu",["lodash"],l):q.muu=l(q._)})(function(l){var n={};n["muu-js-helpers"]={instance:l};var t=function(d,k){for(var g=[],a=0;a<d.length;a++)g.push(k(d[a]));return g};l=function(d,k,g){n[d]={deps:k,factory:g}};var r=function(d){if(!n[d])return m;n[d].instance||(n[d].instance=n[d].factory.apply(m,t(n[d].deps,r)));return n[d].instance};l("muu-directive",["muu-dom-helpers","muu-js-helpers","muu-update-dom"],function(d,k,g){return function(a,
c,b){var h=this;a.innerHTML="";var e=function(f){var e=f.currentTarget,b="data-on"+f.type;e.hasAttribute(b)&&(e=e.getAttribute(b),f=d.createEvent("muu-"+e,m,m,f),a.dispatchEvent(f))};this.update=function(f){var s=p.createElement("div");s.innerHTML=b.renderer(c,f);g(a,s);k.forEach(["keydown","keyup","click","change","search"],function(a){k.forEach(h.querySelectorAll("[data-on"+a+"]"),function(f){f.addEventListener(a,e,!1)})});var u=d.createEvent("muu-parent-update");f=this.querySelectorAll("muu.muu-initialised");
k.forEach(f,function(a){a.dispatchEvent(u)});b.linkAll(h)};this.querySelectorAll=function(f){var e=a.querySelectorAll(f),b=a.querySelectorAll(".muu-isolate"),b=k.union(k.map(b,function(a){return a.querySelectorAll(f)}));return k.difference(e,b)};this.querySelector=function(a){a=h.querySelectorAll(a);if(0<a.length)return a[0]};this.getModel=function(a,e){if(a===m){var b={};k.forEach(h.querySelectorAll("[name]"),function(a){b[a.name]=h.getModel(a.name)});return b}var c=h.querySelector("[name="+a+"]");
return c===m?e:"number"===c.getAttribute("type")?parseFloat(c.value,10):"checkbox"===c.getAttribute("type")?c.checked:"radio"===c.getAttribute("type")?(c=h.querySelectorAll("[name="+a+"]"),d.getRadio(c)||e):c.value};this.setModel=function(a,e){var b=h.querySelector("[name="+a+"]");"checkbox"===b.getAttribute("type")?b.checked=e:"radio"===b.getAttribute("type")?(b=h.querySelectorAll("[name="+a+"]"),d.setRadio(b,e)):b.value=e}}});l("muu-dom-helpers",["muu-js-helpers"],function(d){var k={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},g={DELAY:1E3,escapeHtml:function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return k[a]})},createEvent:function(a,c,b,d){if("function"===typeof CustomEvent)return new CustomEvent(a,{detail:d,bubbles:c,cancelable:b});var e=p.createEvent("CustomEvent");e.initCustomEvent(a,c,b,d);return e},on:function(a,c,b){a.addEventListener(c,b,!1);return function(){a.removeEventListener(c,b,!1)}},ready:function(a){a=d.once(a);if("complete"===
p.readyState)return a(),function(){};var c=g.on(p,"DOMContentLoaded",a),b=g.on(q,"load",a);return function(){c();b()}},isDescendant:function(a,c){return!!a&&(a===c||g.isDescendant(a.parentNode,c))},destroy:function(a,c){var b;if(q.MutationObserver){var h=new MutationObserver(function(){g.isDescendant(a,p)||(c(),b())});h.observe(p,{childList:!0,subtree:!0});b=d.once(function(){h.disconnect();h=m})}else{var e=setInterval(function(){g.isDescendant(a,p)||(c(),b())},g.DELAY);b=function(){clearInterval(e)}}return b},
getRadio:function(a){for(var c=0;c<a.length;c++)if(a[c].checked)return a[c].value},setRadio:function(a,c){for(var b=0;b<a.length;b++)a[b].checked=a[b].value===c?!0:!1}};return g});l("muu",["muu-registry","muu-dom-helpers","muu-location"],function(d,k,g){var a={};a.Registry=d;a.$=k;a.$location=g;return a});l("muu-registry",["muu-template","muu-directive","muu-js-helpers","muu-dom-helpers"],function(d,k,g,a){return function(c){var b=this,h={};this.config=c||{};this.renderer=b.config.renderer||d;this.registerDirective=
function(a,c,d){h[a]={template:c,link:d};return b};this.registerModule=function(a){a(b);return b};this.link=function(e,c){c===m&&(c=e.getAttribute("type"));if(!h.hasOwnProperty(c))throw Error("Unknown directive type: "+c);var d=h[c].link,g=new k(e,h[c].template,b),d=d(g,e);e.classList.add("muu-isolate");e.classList.add("muu-initialised");b.config.debug&&(e.directive=g);d!==m&&a.destroy(e,d);return g};this.linkAll=function(a){a=g.filter(a.querySelectorAll("muu"),function(a){return!a.classList.contains("muu-initialised")});
return g.map(a,function(a){return b.link(a)})}}});l("muu-update-dom",["muu-js-helpers"],function(d){var k=function(a,c){var b=d.map(a.attributes,function(a){return a.name}),g=d.map(c.attributes,function(a){return a.name});d.forEach(b,function(b){c.hasAttribute(b)||"__IE8__"===b.substr(0,7)||a.removeAttribute(b)});d.forEach(g,function(b){a.getAttribute(b)!==c.getAttribute(b)&&a.setAttribute(b,c.getAttribute(b))})},g=function(a,c){for(var b=a.childNodes.length,h=c.childNodes.length,e=h;e<b;e++)a.removeChild(a.childNodes[h]);
for(e=b;e<h;e++)a.appendChild(c.childNodes[b]);for(e=0;e<b&&e<h;e++){var f=a.childNodes[e],l=c.childNodes[e];if(f.nodeType===l.nodeType&&f.nodeName===l.nodeName&&f.type===l.type){if(1===f.nodeType){var m=d.filter(f.classList,function(a){return 0===a.lastIndexOf("muu-",0)});k(f,l);d.forEach(m,function(a){f.classList.add(a)})}else 3===f.nodeType&&(f.nodeValue=l.nodeValue);3===f.nodeType||f.classList.contains("muu-isolate")||g(f,l)}else f.parentNode.replaceChild(l,f)}};return g});return r("muu")})})(window,
document,void 0);
