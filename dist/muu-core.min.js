(function(q,p,m){(function(l){"function"===typeof define&&define.amd?define("muu",["lodash"],l):q.muu=l(q._)})(function(l){var n={};n["muu-js-helpers"]={instance:l};var t=function(d,k){for(var g=[],a=0;a<d.length;a++)g.push(k(d[a]));return g};l=function(d,k,g){n[d]={deps:k,factory:g}};var r=function(d){if(!n[d])return m;n[d].instance||(n[d].instance=n[d].factory.apply(m,t(n[d].deps,r)));return n[d].instance};l("muu-directive",["muu-dom-helpers","muu-js-helpers","muu-update-dom"],function(d,k,g){return function(a,
b,e){var h=this;a.innerHTML="";var c=function(f){var c=f.currentTarget,b="data-on"+f.type;c.hasAttribute(b)&&(c=c.getAttribute(b),f=d.createEvent("muu-"+c,m,m,f),a.dispatchEvent(f))};this.update=function(f){var s=p.createElement("div");s.innerHTML=e.renderer(b,f);g(a,s);k.forEach(["keydown","keyup","click","change","search"],function(a){k.forEach(h.querySelectorAll("[data-on"+a+"]"),function(f){f.addEventListener(a,c,!1)})});var u=d.createEvent("muu-parent-update");f=this.querySelectorAll("muu.muu-initialised");
k.forEach(f,function(a){a.dispatchEvent(u)});e.linkAll(h)};this.querySelectorAll=function(f){var c=a.querySelectorAll(f),b=a.querySelectorAll(".muu-isolate"),b=k.union(k.map(b,function(a){return a.querySelectorAll(f)}));return k.difference(c,b)};this.querySelector=function(a){a=h.querySelectorAll(a);if(0<a.length)return a[0]};this.getModel=function(a,c){if(a===m){var b={};k.forEach(h.querySelectorAll("[name]"),function(a){b[a.name]=h.getModel(a.name)});return b}var e=h.querySelector("[name="+a+"]");
return e===m?c:"number"===e.getAttribute("type")?parseFloat(e.value,10):"checkbox"===e.getAttribute("type")?e.checked:"radio"===e.getAttribute("type")?(e=h.querySelectorAll("[name="+a+"]"),d.getRadio(e)||c):e.value};this.setModel=function(a,c){var b=h.querySelector("[name="+a+"]");"checkbox"===b.getAttribute("type")?b.checked=c:"radio"===b.getAttribute("type")?(b=h.querySelectorAll("[name="+a+"]"),d.setRadio(b,c)):b.value=c}}});l("muu-dom-helpers",["muu-js-helpers"],function(d){var k={"&":"&amp;",
"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},g={DELAY:1E3,escapeHtml:function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return k[a]})},createEvent:function(a,b,e,d){if("function"===typeof CustomEvent)return new CustomEvent(a,{detail:d,bubbles:b,cancelable:e});var c=p.createEvent("CustomEvent");c.initCustomEvent(a,b,e,d);return c},on:function(a,b,e){a.addEventListener(b,e,!1);return function(){a.removeEventListener(b,e,!1)}},ready:function(a){a=d.once(a);if("complete"===
p.readyState)return a(),function(){};var b=g.on(p,"DOMContentLoaded",a),e=g.on(q,"load",a);return function(){b();e()}},isDescendant:function(a,b){return!!a&&(a===b||g.isDescendant(a.parentNode,b))},destroy:function(a,b){var e;if(q.MutationObserver){var h=new MutationObserver(function(){g.isDescendant(a,p)||(b(),e())});h.observe(p,{childList:!0,subtree:!0});e=d.once(function(){h.disconnect();h=m})}else{var c=setInterval(function(){g.isDescendant(a,p)||(b(),e())},g.DELAY);e=function(){clearInterval(c)}}return e},
getRadio:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value},setRadio:function(a,b){d.forEach(a,function(a){a.checked=a.value===b?!0:!1})}};return g});l("muu",["muu-registry","muu-dom-helpers","muu-location"],function(d,k,g){var a={};a.Registry=d;a.$=k;a.$location=g;return a});l("muu-registry",["muu-template","muu-directive","muu-js-helpers","muu-dom-helpers"],function(d,k,g,a){return function(b){var e=this,h={};this.config=b||{};this.renderer=e.config.renderer||d;this.registerDirective=
function(a,b,d){h[a]={template:b,link:d};return e};this.registerModule=function(a){a(e);return e};this.link=function(c,b){b===m&&(b=c.getAttribute("type"));if(!h.hasOwnProperty(b))throw Error("Unknown directive type: "+b);var d=h[b].link,g=new k(c,h[b].template,e),d=d(g,c);c.classList.add("muu-isolate");c.classList.add("muu-initialised");e.config.debug&&(c.directive=g);d!==m&&a.destroy(c,d);return g};this.linkAll=function(a){a=g.filter(a.querySelectorAll("muu"),function(a){return!a.classList.contains("muu-initialised")});
return g.map(a,function(a){return e.link(a)})}}});l("muu-update-dom",["muu-js-helpers"],function(d){var k=function(a,b){var e=d.map(a.attributes,function(a){return a.name}),g=d.map(b.attributes,function(a){return a.name});d.forEach(e,function(c){b.hasAttribute(c)||"__IE8__"===c.substr(0,7)||a.removeAttribute(c)});d.forEach(g,function(c){a.getAttribute(c)!==b.getAttribute(c)&&a.setAttribute(c,b.getAttribute(c))})},g=function(a,b){for(var e=a.childNodes.length,h=b.childNodes.length,c=h;c<e;c++)a.removeChild(a.childNodes[h]);
for(c=e;c<h;c++)a.appendChild(b.childNodes[e]);for(c=0;c<e&&c<h;c++){var f=a.childNodes[c],l=b.childNodes[c];if(f.nodeType===l.nodeType&&f.nodeName===l.nodeName&&f.type===l.type){if(1===f.nodeType){var m=d.filter(f.classList,function(a){return 0===a.lastIndexOf("muu-",0)});k(f,l);d.forEach(m,function(a){f.classList.add(a)})}else 3===f.nodeType&&(f.nodeValue=l.nodeValue);3===f.nodeType||f.classList.contains("muu-isolate")||g(f,l)}else f.parentNode.replaceChild(l,f)}};return g});return r("muu")})})(window,
document,void 0);
