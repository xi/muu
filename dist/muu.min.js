(function(n,k,l){(function(l){"function"===typeof define&&define.amd?define("muu",[],l):n.muu=l(n._)})(function(h){var m={};m["muu-js-helpers"]={instance:h};var t=function(d,c){for(var e=[],a=0;a<d.length;a++)e.push(c(d[a]));return e};h=function(d,c,e){m[d]={deps:c,factory:e}};var s=function(d){if(!m[d])return l;m[d].instance||(m[d].instance=m[d].factory.apply(l,t(m[d].deps,s)));return m[d].instance};h("muu-directive",["muu-dom-helpers","muu-js-helpers","muu-update-dom"],function(d,c,e){return function(a,
b,g){var f=this;a.innerHTML="";var r=function(b){var c=b.currentTarget,e="data-on"+b.type;c.hasAttribute(e)&&(c=c.getAttribute(e),b=d.createEvent("muu-"+c,l,l,b),a.dispatchEvent(b))};this.update=function(p){e(a,g.renderer(b,p));c.forEach(["keydown","keyup","click","change","search"],function(a){c.forEach(f.querySelectorAll("[data-on"+a+"]"),function(b){b.addEventListener(a,r,!1)})});var u=d.createEvent("muu-parent-update");p=f.querySelectorAll("muu.muu-initialised");c.forEach(p,function(a){a.dispatchEvent(u)});
g.linkAll(f)};this.querySelectorAll=function(b){var d=a.querySelectorAll(b),e=a.querySelectorAll(".muu-isolate"),e=c.union(c.map(e,function(a){return a.querySelectorAll(b)}));return c.difference(d,e)};this.querySelector=function(a){a=f.querySelectorAll(a);if(0<a.length)return a[0]};this.on=function(b,c){return d.on(a,"muu-"+b,function(a){return c(a.detail)})};this.getModel=function(a,b){if(a===l){var e={};c.forEach(f.querySelectorAll("[name]"),function(a){e[a.name]=f.getModel(a.name)});return e}var g=
f.querySelector("[name="+a+"]");return g===l?b:"number"===g.getAttribute("type")?parseFloat(g.value):"checkbox"===g.getAttribute("type")?g.checked:"radio"===g.getAttribute("type")?(g=f.querySelectorAll("[name="+a+"]"),d.getRadio(g)||b):g.value};this.setModel=function(a,b){if(f.getModel(a)!==b){var c=f.querySelector("[name="+a+"]");"checkbox"===c.getAttribute("type")?c.checked=b:"radio"===c.getAttribute("type")?(c=f.querySelectorAll("[name="+a+"]"),d.setRadio(c,b)):c.value=b}}}});h("muu-dom-helpers",
["muu-js-helpers"],function(d){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},e={DELAY:1E3,escapeHtml:function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return c[a]})},createEvent:function(a,b,c,d){if("function"===typeof CustomEvent)return new CustomEvent(a,{detail:d,bubbles:b,cancelable:c});var e=k.createEvent("CustomEvent");e.initCustomEvent(a,b,c,d);return e},on:function(a,b,c){a.addEventListener(b,c,!1);return function(){a.removeEventListener(b,c,!1)}},
ready:function(a){a=d.once(a);if("complete"===k.readyState)return a(),function(){};var b=e.on(k,"DOMContentLoaded",a),c=e.on(n,"load",a);return function(){b();c()}},isDescendant:function(a,b){return!!a&&(a===b||e.isDescendant(a.parentNode,b))},destroy:function(a,b){var c;if(n.MutationObserver){var f=new MutationObserver(function(){e.isDescendant(a,k)||(b(),c())});f.observe(k,{childList:!0,subtree:!0});c=d.once(function(){f.disconnect();f=l})}else{var r=setInterval(function(){e.isDescendant(a,k)||
(b(),c())},e.DELAY);c=function(){clearInterval(r)}}return c},getRadio:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value},setRadio:function(a,b){d.forEach(a,function(a){a.checked=a.value===b?!0:!1})}};return e});h("muu-js-helpers",[],function(){var d={isString:function(c){return"string"===typeof c||"[object String]"===Object.prototype.toString.call(c)}};d.isArray=Array.isArray;d.isFunction=function(c){return"function"===typeof c};d.once=function(c){var d,a=!1;return function(){a||
(d=c.apply(this,arguments),a=!0);return d}};d.indexOf=function(c,d){if("indexOf"in c)return c.indexOf(d);for(var a=c.length,b=0;b<a;b++)if(c[b]===d)return b;return-1};d.forEach=function(c,d){if("forEach"in c)return c.forEach(d);for(var a=c.length,b=0;b<a;b++)d(c[b],b,c)};d.map=function(c,e){if("map"in c)return c.map(e);var a=[];d.forEach(c,function(b){a.push(e(b))});return a};d.filter=function(c,e){if("filter"in c)return c.filter(e);var a=[];d.forEach(c,function(b){e(b)&&a.push(b)});return a};d.union=
function(c){var e=[];d.forEach(c,function(a){d.forEach(a,function(a){-1===d.indexOf(e,a)&&e.push(a)})});return e};d.difference=function(c,e){for(var a=[],b=0;b<c.length;b++)-1===d.indexOf(e,c[b])&&a.push(c[b]);return a};d.flatten=function(c){var e=[];d.forEach(c,function(a){d.isArray(a)?e=e.concat(d.flatten(a)):e.push(a)});return e};return d});h("muu-location",["muu-search"],function(d){var c={absUrl:function(){return location.href},url:function(a,b){if(a===l)return location.pathname+location.search+
location.hash;b?history.replaceState(null,null,a):history.pushState(null,null,a);return c},protocol:function(){return location.protocol},host:function(){return location.host},port:function(){return location.port},path:function(a,b){if(a===l)return location.pathname;c.url(a+location.search+location.hash,b);return c}},e=function(a,b){if(a===l)return location.search;a&&"?"!==a[0]&&(a="?"+a);1===a.length&&(a="");c.url(location.pathname+a+location.hash,b);return c};c.search=function(a,b,c){if(a!==l){if(b!==
l){var f=d.parse(e());f[a]=b;return e(d.unparse(f),c)}return e(d.unparse(a),c)}return d.parse(e())};c.hash=function(a,b){if(a===l)return location.hash?location.hash.slice(1):"";c.url(location.pathname+location.search+"#"+a,b);return c};c.addEventListener=function(a,b){"change"===a&&n.addEventListener("popstate",b,!1);return c};c.removeEventListener=function(a,b){"change"===a&&n.removeEventListener("popstate",b,!1);return c};return c});h("muu-registry",["muu-template","muu-directive","muu-js-helpers",
"muu-dom-helpers"],function(d,c,e,a){return function(b){var g=this,f={};this.config=b||{};this.renderer=g.config.renderer||d;this.registerDirective=function(a,b,c){f[a]={template:b,link:c};return g};this.registerModule=function(a){a(g);return g};this.link=function(b,d){d===l&&(d=b.getAttribute("type"));if(!f.hasOwnProperty(d))throw Error("Unknown directive type: "+d);var e=f[d].link,q=new c(b,f[d].template,g),e=e(q,b);b.classList.add("muu-isolate");b.classList.add("muu-initialised");g.config.debug&&
(b.directive=q);e!==l&&a.destroy(b,e);return q};this.linkAll=function(a){a=e.filter(a.querySelectorAll("muu"),function(a){return!a.classList.contains("muu-initialised")});return e.map(a,function(a){return g.link(a)})}}});h("muu-search",["muu-js-helpers"],function(d){var c={parse:function(a){var b={},c=function(a,c){b.hasOwnProperty(a)?d.isArray(b[a])?b[a].push(c):b[a]=[b[a],c]:b[a]=c};d.forEach(a.substring(1).split("&"),function(a){a=d.map(a.split("="),decodeURIComponent);2===a.length?c(a[0],a[1]):
a[0]&&c(a[0],!0)});return b}},e=function(a,b){return b===l||null===b||!1===b?[]:d.isArray(b)?d.flatten(d.map(b,function(b){return e(a,b)})):!0===b?[encodeURIComponent(a)]:[encodeURIComponent(a)+"="+encodeURIComponent(b)]};c.unparse=function(a){if(d.isString(a))return a;var b=[],c;for(c in a)a.hasOwnProperty(c)&&(b=b.concat(e(c,a[c])));return 0<b.length?"?"+b.join("&"):""};return c});h("muu-template",["muu-js-helpers","muu-dom-helpers"],function(d,c){var e=function(a,b){return"this"===a?b:b[a]},a=
function(a){if(-1===a.indexOf(":"))return function(b){(b=e(a,b))||0===b||(b="");return c.escapeHtml(b)};var b=d.map(a.split(","),function(a){var b=a.split(":");a=b[0].trim();b=b.slice(1).join(":").trim();return[a,b]});return function(a){var g=d.map(d.filter(b,function(b){return e(b[1],a)}),function(a){return a[0]});return c.escapeHtml(g.join(" "))}},b=function(a,b,c){var f=g(b,a);return{render:function(b){var p=e(a,b),g="";c?p||(g+=f.render(b)):d.isArray(p)?d.forEach(p,function(a){g+=f.render(a)}):
p&&(g+=f.render(b));return g},afterBlock:f.afterBlock}},g=function(c,d){var e=c.indexOf("{{");if(-1===e){if(d===l)return{render:function(){return c},afterBlock:""};throw Error("unclosed loop: "+d);}var f=c.slice(0,e),h=c.slice(e),m=h.indexOf("}}");if(-1===m)throw Error("unclosed tag: "+h);var e=h.slice(2,m),h=h.slice(m+2),m=!0,k={render:function(){return""},afterBlock:h};if(0===e.lastIndexOf("#",0))k=b(e.substr(1),h);else if(0===e.lastIndexOf("^",0))k=b(e.substr(1),h,!0);else if(0===e.lastIndexOf("/",
0)){if(m=!1,e.substr(1)!==d)throw Error("unexpected closing loop: "+e);}else 0!==e.lastIndexOf("!",0)&&(k.render=a(e));if(m){var n=g(k.afterBlock,d);return{render:function(a){return f+k.render(a)+n.render(a)},afterBlock:n.afterBlock}}return{render:function(a){return f+k.render(a)},afterBlock:k.afterBlock}},f={};return function(a,b){f[a]===l&&(f[a]=g(a));return f[a].render(b)}});h("muu-update-dom",["muu-js-helpers"],function(d){var c=function(a,b){var c=d.filter(a.classList,function(a){return 0===
a.lastIndexOf("muu-",0)}),e=d.map(a.attributes,function(a){return a.name}),l=d.map(b.attributes,function(a){return a.name});d.forEach(e,function(c){b.hasAttribute(c)||"__IE8__"===c.substr(0,7)||a.removeAttribute(c)});d.forEach(l,function(c){a.getAttribute(c)!==b.getAttribute(c)&&a.setAttribute(c,b.getAttribute(c))});d.forEach(c,function(b){a.classList.add(b)})},e=function(a,b){for(var d=a.childNodes.length,f=b.childNodes.length,l=0,h=f;h<d;h++)a.removeChild(a.childNodes[f]);for(h=d;h<f;h++)a.appendChild(b.childNodes[d]);
for(h=0;h<d&&h<f;h++){var k=a.childNodes[h],m=b.childNodes[h-l];k.nodeType===m.nodeType&&k.nodeName===m.nodeName&&k.type===m.type?(1===k.nodeType?c(k,m):3===k.nodeType&&(k.nodeValue=m.nodeValue),3===k.nodeType||k.classList.contains("muu-isolate")||e(k,m)):(k.parentNode.replaceChild(m,k),l+=1)}};return function(a,b){var c=k.createElement("div");c.innerHTML=b;e(a,c)}});h("muu",["muu-registry","muu-dom-helpers","muu-location"],function(d,c,e){var a={};a.Registry=d;a.$=c;a.$location=e;return a});return s("muu")})})(window,
document,void 0);
