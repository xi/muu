!function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],t):(e.Mustache={},t(Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return v(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return g.call(e,t)}function u(e){return!o(y,e)}function a(e){return String(e).replace(/[&<>"'\/]/g,function(e){return m[e]})}function s(t,n){function i(){if(y&&!m)for(;g.length;)delete d[g.pop()];else g=[];y=!1,m=!1}function o(e){if("string"==typeof e&&(e=e.split(k,2)),!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),h=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var a,s,h,p=[],d=[],g=[],y=!1,m=!1;o(n||e.tags);for(var A,S,T,q,O,U,j=new f(t);!j.eos();){if(A=j.pos,T=j.scanUntil(a))for(var L=0,M=T.length;M>L;++L)q=T.charAt(L),u(q)?g.push(d.length):m=!0,d.push(["text",q,A,A+1]),A+=1,"\n"===q&&i();if(!j.scan(a))break;if(y=!0,S=j.scan(x)||"name",j.scan(w),"="===S?(T=j.scanUntil(b),j.scan(b),j.scanUntil(s)):"{"===S?(T=j.scanUntil(h),j.scan(E),j.scanUntil(s),S="&"):T=j.scanUntil(s),!j.scan(s))throw new Error("Unclosed tag at "+j.pos);if(O=[S,T,A,j.pos],d.push(O),"#"===S||"^"===S)p.push(O);else if("/"===S){if(U=p.pop(),!U)throw new Error('Unopened section "'+T+'" at '+A);if(U[1]!==T)throw new Error('Unclosed section "'+U[1]+'" at '+A)}else"name"===S||"{"===S||"&"===S?m=!0:"="===S&&o(T)}if(U=p.pop())throw new Error('Unclosed section "'+U[1]+'" at '+j.pos);return l(c(d))}function c(e){for(var t,n,r=[],i=0,o=e.length;o>i;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function l(e){for(var t,n,r=[],i=r,o=[],u=0,a=e.length;a>u;++u)switch(t=e[u],t[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":n=o.pop(),n[5]=t[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(t)}return r}function f(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var d=Object.prototype.toString,v=Array.isArray||function(e){return"[object Array]"===d.call(e)},g=RegExp.prototype.test,y=/\S/,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},w=/\s*/,k=/\s+/,b=/\s*=/,E=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},h.prototype.push=function(e){return new h(e,this)},h.prototype.lookup=function(e){var n,r=this.cache;if(r.hasOwnProperty(e))n=r[e];else{for(var o,u,a=this,s=!1;a;){if(e.indexOf(".")>0)for(n=a.view,o=e.split("."),u=0;null!=n&&u<o.length;)u===o.length-1&&(s=i(n,o[u])),n=n[o[u++]];else n=a.view[e],s=i(a.view,e);if(s)break;a=a.parent}r[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=s(e,t)),r},p.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof h?t:new h(t);return this.renderTokens(r,i,n,e)},p.prototype.renderTokens=function(e,t,n,r){for(var i,o,u,a="",s=0,c=e.length;c>s;++s)u=void 0,i=e[s],o=i[0],"#"===o?u=this.renderSection(i,t,n,r):"^"===o?u=this.renderInverted(i,t,n,r):">"===o?u=this.renderPartial(i,t,n,r):"&"===o?u=this.unescapedValue(i,t):"name"===o?u=this.escapedValue(i,t):"text"===o&&(u=this.rawValue(i)),void 0!==u&&(a+=u);return a},p.prototype.renderSection=function(e,n,r,i){function o(e){return u.render(e,n,r)}var u=this,a="",s=n.lookup(e[1]);if(s){if(v(s))for(var c=0,l=s.length;l>c;++c)a+=this.renderTokens(e[4],n.push(s[c]),r,i);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)a+=this.renderTokens(e[4],n.push(s),r,i);else if(t(s)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");s=s.call(n.view,i.slice(e[3],e[5]),o),null!=s&&(a+=s)}else a+=this.renderTokens(e[4],n,r,i);return a}},p.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);return!i||v(i)&&0===i.length?this.renderTokens(e[4],t,n,r):void 0},p.prototype.renderPartial=function(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},p.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);return null!=r?e.escape(r):void 0},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.3",e.tags=["{{","}}"];var A=new p;e.clearCache=function(){return A.clearCache()},e.parse=function(e,t){return A.parse(e,t)},e.render=function(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return A.render(e,t,r)},e.to_html=function(n,r,i,o){var u=e.render(n,r,i);return t(o)?void o(u):u},e.escape=a,e.Scanner=f,e.Context=h,e.Writer=p}),define("js-helpers",[],function(){"use strict";var e={};return e.once=function(e){var t,n=!1;return function(){return n||(t=e.apply(this,arguments),n=!0),t}},e.indexOf=function(e,t){if("indexOf"in e)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},e.forEach=function(e,t){if("forEach"in e)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n])},e.map=function(e,t){if("map"in e)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.filter=function(e,t){if("filter"in e)return e.filter(t);for(var n=[],r=0;r<e.length;r++)if(t(e[r]))return n.push(e[r]);return n},e.union=function(t){for(var n=[],r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)-1===e.indexOf(n,t[r][i])&&n.push(t[r][i]);return n},e.difference=function(t,n){for(var r=[],i=0;i<t.length;i++)-1===e.indexOf(n,t[i])&&r.push(t[i]);return r},e}),define("dom-helpers",["js-helpers"],function(e){"use strict";return{ready:function(t){var n=e.once(t);"complete"===document.readyState?n():(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},getRadio:function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value},setRadio:function(e,t){for(var n=0;n<e.length;n++){if(e[n].value===t)return void(e[n].checked=!0);e[n].checked=!1}}}}),define("evmgr",[],function(){"use strict";return function(){var e=this,t={},n=0,r=function(){return n++};e.on=function(n,i){t[n]=t[n]||{};var o=r();return t[n][o]=i,function(){e.off(n,o)}},e.off=function(e,n){void 0===e?t={}:void 0===n?delete t[e]:delete t[e][n]},e.trigger=function(e,n){for(var r in t[e])if(t[e].hasOwnProperty(r)){var i=t[e][r];i(n)}}}}),define("updateDOM",["js-helpers"],function(e){"use strict";var t=function(t,n){var r=e.map(t.attributes,function(e){return e.name}),i=e.map(n.attributes,function(e){return e.name});e.forEach(r,function(e){n.hasAttribute(e)||t.removeAttribute(e)}),e.forEach(i,function(e){t.setAttribute(e,n.getAttribute(e))})},n=function(r,i){var o=r.childNodes.length,u=i.childNodes.length;if(r.nodeType===i.nodeType&&r.nodeName===i.nodeName){if(1===r.nodeType){var a=e.filter(r.classList,function(e){return e.startsWith("muu-")});t(r,i),e.forEach(a,function(e){r.classList.add(e)})}else 3===r.nodeType&&(r.nodeValue=i.nodeValue);if(1!==r.nodeType||!r.classList.contains("muu-isolate")){for(var s=0;o>s&&u>s;s++)n(r.childNodes[s],i.childNodes[s]);for(var s=u;o>s;s++)r.removeChild(r.childNodes[u]);for(var s=o;u>s;s++)r.appendChild(i.childNodes[o])}}else r.parentNode.replaceChild(i,r)};return n}),define("directive",["mustache","dom-helpers","js-helpers","evmgr","updateDOM"],function(e,t,n,r,i){"use strict";return function(o,u,a){var s=this,c=new r,l=function(e){var t="data-on"+e.type;if(e.target.hasAttribute(t)){var n=e.target.getAttribute(t);c.trigger(n,e)}};s.update=function(t){var r=document.createElement("div");r.innerHTML=e.render(u,t),i(o,r),n.forEach(["keydown","keyup","click","change","search"],function(e){var t="[data-on"+e+"]";n.forEach(s.querySelectorAll(t),function(t){t.addEventListener(e,l)})}),a.linkAll(s)},s.querySelectorAll=function(e){var t=o.querySelectorAll(e),r=o.querySelectorAll(".muu-isolate"),i=n.union(n.map(r,function(t){return t.querySelectorAll(e)}));return n.difference(t,i)},s.querySelector=function(e){var t=s.querySelectorAll(e);return t.length>0?t[0]:void 0},s.getModel=function(e,r){if(void 0===e){var i={};return n.forEach(s.querySelectorAll("[name]"),function(e){i[e.name]=s.getModel(e.name)}),i}var o=s.querySelector("[name="+e+"]");if("checkbox"===o.type)return o.checked;if("radio"===o.type){var u=s.querySelectorAll("[name="+e+"]");return t.getRadio(u)||r}return o.value||r},s.setModel=function(e,n){var r=s.querySelector("[name="+e+"]");if("checkbox"===r.type)r.checked=n;else if("radio"===r.type){var i=s.querySelectorAll("[name="+e+"]");t.setRadio(i,n)}else r.value=n},s.on=function(e,t){return c.on(e,t)}}}),define("muu",["directive","js-helpers"],function(e,t){"use strict";return function(n){var r=this,i={};r.config=n||{},r.registerDirective=function(e,t,n){return i[e]={template:t,link:n},r},r.registerModule=function(e){return e(r),r},r.link=function(t,n){if(void 0===n&&(n=t.getAttribute("type")),!i.hasOwnProperty(n))throw new Error("Unknown directive type: "+n);var o=i[n].template,u=i[n].link;t.innerHTML="<div></div>";var a=new e(t.children[0],o,r);return u(a,t),t.classList.add("muu-isolate"),t.classList.add("muu-initialised"),r.config.debug&&(t.directive=a),a},r.linkAll=function(e){var n=e.querySelectorAll("muu:not(.muu-initialised)");return t.map(n,function(e){return r.link(e)})}}});
//# sourceMappingURL=muu.min.js.map