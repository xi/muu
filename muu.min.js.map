{"version":3,"file":"muu.min.js","sources":["muu-js-helpers.js","muu-dom-helpers.js","muu-template.js","muu-update-dom.js","muu-directive.js","muu.js"],"names":["define","_","objToString","value","Object","prototype","toString","call","isString","isArray","Array","isFunction","once","fn","result","called","apply","this","arguments","indexOf","array","i","length","forEach","map","results","push","filter","union","arrays","j","difference","a","b","flatten","o","item","concat","entityMap","&","<",">","\"","'","/","$","DELAY","escapeHtml","string","String","replace","s","createEvent","type","detail","CustomEvent","event","document","initCustomEvent","on","element","eventName","callback","addEventListener","removeEventListener","ready","_fn","readyState","u1","u2","window","isDescendant","desc","root","parentNode","destroy","unregister","intervalID","setInterval","clearInterval","getRadio","options","checked","setRadio","openTag","closeTag","parseVariableTemplate","template","content","slice","data","pairs","split","pair","v","key","trim","join","parseLoopTemplate","tag","afterTag","tagName","parseTemplate","inner","afterLoop","render","last","pop","loopName","openIndex","Error","beforeTag","tmp","closeIndex","lastIndexOf","loop","after","updateAttributes","target","source","targetAttrNames","attributes","name","sourceAttrNames","hasAttribute","substr","removeAttribute","getAttribute","setAttribute","updateDOM","nt","childNodes","ns","nodeType","nodeName","muuClasses","classList","cls","add","nodeValue","contains","removeChild","appendChild","replaceChild","Directive","registry","self","innerHTML","eventCallback","originalEvent","attrName","dispatchEvent","update","createElement","renderer","children","eventType","selector","querySelectorAll","updateEvent","subDirectives","linkAll","hits","isolations","isolated","isolation","querySelector","all","getModel","_default","model","setModel","muuTemplate","Registry","config","directives","registerDirective","link","registerModule","module","hasOwnProperty","directive","unlink","debug","elements"],"mappings":"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B,KAAArH,MAKA,OAAAiH;ALlIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA,ADgLA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA,ADmFA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/**\n * Minimal implementation of an underscore/lodash subset.\n * @module muu-js-helpers\n */\ndefine('muu-js-helpers',[],function() {\n    \"use strict\";\n\n    /** @lends module:muu-js-helpers */\n    var _ = {};\n\n    /**\n     * @param {object} value\n     * @return {string}\n     */\n    var objToString = function(value) {\n        return Object.prototype.toString.call(value);\n    };\n\n    /**\n     * @param {*} value\n     * @return {boolean}\n     */\n    _.isString = function(value) {\n        return typeof value === 'string' || objToString(value) === '[object String]';\n    };\n\n    /**\n     * @function\n     * @param {*} value\n     * @return {boolean}\n     */\n    _.isArray = Array.isArray;\n\n    /**\n     * @param {*} value\n     * @return {boolean}\n     */\n    _.isFunction = function(value) {\n        return typeof value === 'function';\n    };\n\n    /**\n     * @param {function} fn\n     * @return {function}\n     */\n    _.once = function(fn) {\n        var result;\n        var called = false;\n\n        return function() {\n            if (!called) {\n                result = fn.apply(this, arguments);\n                called = true;\n            }\n            return result;\n        };\n    };\n\n    /**\n     * @param {array} array\n     * @param {*} value\n     * @return {number}\n     */\n    _.indexOf = function(array, value) {\n        if ('indexOf' in array) {\n            return array.indexOf(value);\n        }\n\n        for (var i = 0; i < array.length; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    };\n\n    /**\n     * @param {array} array\n     * @param {function} fn\n     */\n    _.forEach = function(array, fn) {\n        if ('forEach' in array) {\n            return array.forEach(fn);\n        }\n\n        for (var i = 0; i < array.length; i++) {\n            fn(array[i]);\n        }\n    };\n\n    /**\n     * @param {array} array\n     * @param {function} fn\n     * @return {array}\n     */\n    _.map = function(array, fn) {\n        if ('map' in array) {\n            return array.map(fn);\n        }\n\n        var results = [];\n        for (var i = 0; i < array.length; i++) {\n            results.push(fn(array[i]));\n        }\n        return results;\n    };\n\n    /**\n     * @param {array} array\n     * @param {function} fn\n     * @return {array}\n     */\n    _.filter = function(array, fn) {\n        if ('filter' in array) {\n            return array.filter(fn);\n        }\n\n        var results = [];\n        for (var i = 0; i < array.length; i++) {\n            if (fn(array[i])) {\n                results.push(array[i]);\n            }\n        }\n        return results;\n    };\n\n    /**\n     * @param {array[]} arrays\n     * @return {array}\n     */\n    _.union = function(arrays) {\n        var results = [];\n        for (var i = 0; i < arrays.length; i++) {\n            for (var j = 0; j < arrays[i].length; j++) {\n                if (_.indexOf(results, arrays[i][j]) === -1) {\n                    results.push(arrays[i][j]);\n                }\n            }\n        }\n        return results;\n    };\n\n    /**\n     * @param {array} a\n     * @param {array} b\n     * @return {array}\n     */\n    _.difference = function(a, b) {\n        var results = [];\n        for (var i = 0; i < a.length; i++) {\n            if (_.indexOf(b, a[i]) === -1) {\n                results.push(a[i]);\n            }\n        }\n        return results;\n    };\n\n    /**\n     * @param {array} a\n     * @return {array}\n     */\n    _.flatten = function(a) {\n        var o = [];\n        _.forEach(a, function(item) {\n            if (_.isArray(item)) {\n                o = o.concat(_.flatten(item));\n            } else {\n                o.push(item);\n            }\n        });\n        return o;\n    };\n\n    return _;\n});\n\n","/**\n * DOM related helper functions\n * @module muu-dom-helpers\n */\ndefine('muu-dom-helpers',['muu-js-helpers'], function(_) {\n    \"use strict\";\n\n    var entityMap = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;'\n    };\n\n    /** @lends module:muu-dom-helpers */\n    var $ = {};\n\n    $.DELAY = 1000;\n\n    /**\n     * @param {string} string\n     * @return {string} - escaped HTML\n     */\n    $.escapeHtml = function(string) {\n        return String(string).replace(/[&<>\"'\\/]/g, function(s) {\n            return entityMap[s];\n        });\n    };\n\n    /**\n     * Cross browser custom events.\n     *\n     * See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events\n     *\n     * *Note*: IE does not seem to like it when you use existing event names\n     * with this.\n     *\n     * @param {string} type\n     * @param {*} detail\n     * @return {DOMEvent}\n     */\n    $.createEvent = function(type, detail) {\n        if (typeof CustomEvent === 'function') {\n            return new CustomEvent(type, {\n                detail: detail\n            });\n        } else {\n            var event = document.createEvent('CustomEvent');\n            event.initCustomEvent(type, false, true, detail);\n            return event;\n        }\n    };\n\n    /**\n     * @param {DOMElement} element\n     * @param {string} eventName\n     * @param {function} callback\n     * @return {Function()} An unregister function\n     */\n    $.on = function(element, eventName, callback) {\n        element.addEventListener(eventName, callback, false);\n        return function() {\n            element.removeEventListener(eventName, callback, false);\n        };\n    };\n\n    /**\n     * @param {function} fn\n     * @return {Function()} An unregister function\n     */\n    $.ready = function(fn) {\n        var _fn = _.once(fn);\n        if (document.readyState === 'complete') {\n            _fn();\n            return function() {};\n        } else {\n            var u1 = $.on(document, 'DOMContentLoaded', _fn);\n            var u2 = $.on(window, 'load', _fn);\n            return function() {\n                u1();\n                u2();\n            };\n        }\n    };\n\n    $.isDescendant = function(desc, root) {\n         return !!desc && (desc === root || $.isDescendant(desc.parentNode, root));\n    };\n\n    /**\n     * Execute a function when `element` is removed from the DOM.\n     *\n     * @param {DOMElement} element\n     * @param {function} fn\n     * @return {Function()} An unregister function\n     */\n    $.destroy = function(element, fn) {\n        var unregister;\n\n        if (false) {\n            var observer = new MutationObserver(function() {\n                if (!$.isDescendant(element, document)) {\n                    fn();\n                    unregister();\n                }\n            });\n\n            observer.observe(document, {\n                 childList: true,\n                 subtree: true\n            });\n\n            unregister = _.once(function() {\n                observer.disconnect();\n                observer = undefined;\n            });\n        } else {\n            var intervalID = setInterval(function() {\n                if (!$.isDescendant(element, document)) {\n                    fn();\n                    unregister();\n                }\n            }, $.DELAY);\n\n            unregister = function() {\n                clearInterval(intervalID);\n            };\n        }\n\n        return unregister;\n    };\n\n    /**\n     * @param {DOMElement[]} options\n     * @return {string}\n     */\n    $.getRadio = function(options) {\n        for (var i = 0; i < options.length; i++) {\n            if (options[i].checked) {\n                return options[i].value;\n            }\n        }\n    };\n\n    /**\n     * @param {DOMElement[]} options\n     * @param {string} value\n     */\n    $.setRadio = function(options, value) {\n        for (var i = 0; i < options.length; i++) {\n            if (options[i].value === value) {\n                options[i].checked = true;\n            } else {\n                options[i].checked = false;\n            }\n        }\n    };\n\n    return $;\n});\n\n","/**\n * minimal mustache insipred templating\n *\n * ## Variables\n *\n * Variables are created with a `{{name}}` tag. These are always escaped.\n *\n * ## Loops\n *\n * Loops render blocks of text a number of times, depending on the value of\n * the key in the current context.\n *\n * A loop begins with a pound and ends with a slash. That is, {{#person}}\n * begins a \"person\" section while {{/person}} ends it.\n *\n * If the value is an array, the block is repeated for each item in that array.\n * In any other case, the block is rendered with the outer scope, but only if\n * the value is truthy.\n *\n * ## Comments\n *\n * Comments begin with a bang and are ignored.\n *\n * ## Pairs\n *\n * Pairs look like JSON objects. The result is a space separated list of all\n * keys with truthy values.\n *\n * ```\n * muuTemplate('{{foo: var1, bar: var2, baz: var3}}', {\n *   var1: true,\n *   var2: false,\n *   var3: true\n * });  // 'foo baz'\n * ```\n *\n * @module muu-template\n * @param {string} template\n * @param {object} data\n * @return {string}\n */\ndefine('muu-template',['muu-js-helpers', 'muu-dom-helpers'], function(_, $) {\n    \"use strict\";\n\n    var openTag = '{{';\n    var closeTag = '}}';\n\n    var parseVariableTemplate = function(template) {\n        var content = template.slice(2, -2);\n\n        if (template.indexOf(':') === -1) {\n            return function(data) {\n                return $.escapeHtml(data[content] || '');\n            };\n        } else {\n            var pairs = content.split(',').map(function(pair) {\n                var v = pair.split(':');\n                var key = v[0].trim();\n                var value = v.slice(1).join(':').trim();\n                return [key, value];\n            });\n\n            return function(data) {\n                var results = [];\n\n                for (var i = 0; i < pairs.length; i++) {\n                    var key = pairs[i][0];\n                    var value = pairs[i][1];\n\n                    if (data[value]) {\n                        results.push(key);\n                    }\n                }\n\n                return $.escapeHtml(results.join(' '));\n            };\n        }\n    };\n\n    var parseLoopTemplate = function(tag, afterTag) {\n        var tagName = tag.slice(3, -2);\n\n        var v = parseTemplate(afterTag, tagName);\n        var inner = v[0];\n        var afterLoop = v[1];\n\n        var render = function(data) {\n            if (_.isArray(data[tagName])) {\n                var result = '';\n                for (var i = 0; i < data[tagName].length; i++) {\n                    result += inner(data[tagName][i]);\n                }\n                return result;\n            } else if (data[tagName]) {\n                return inner(data);\n            } else {\n                return '';\n            }\n        };\n\n        return [render, afterLoop];\n    };\n\n    var concat = function(a) {\n        var last = a.pop();\n\n        if (_.isArray(last)) {\n            a.push(last[0]);\n            return [concat(a), last[1]];\n        } else {\n            a.push(last);\n\n            return function(data) {\n                return a.map(function(item) {\n                    if (_.isString(item)) {\n                        return item;\n                    } else if (_.isFunction(item)) {\n                        return item(data);\n                    }\n                }).join('');\n            };\n        }\n    };\n\n    var parseTemplate = function(template, loopName) {\n        var openIndex = template.indexOf(openTag);\n        if (openIndex === -1) {\n            if (loopName === void 0) {\n                return function() {\n                    return template;\n                };\n            } else {\n                throw new Error('unclosed loop: ' + loopName);\n            }\n        } else {\n            var beforeTag = template.slice(0, openIndex);\n            var tmp = template.slice(openIndex);\n\n            var closeIndex = tmp.indexOf(closeTag) + 2;\n            if (closeIndex === 1) {\n                throw new Error('unclosed tag: ' + tmp);\n            }\n            var tag = tmp.slice(0, closeIndex);\n            var afterTag = tmp.slice(closeIndex);\n\n            if (tag.lastIndexOf('{{#', 0) === 0) {\n                var v = parseLoopTemplate(tag, afterTag);\n                var loop = v[0];\n                var after = parseTemplate(v[1], loopName);\n                return concat([beforeTag, loop, after]);\n            } else if (tag.lastIndexOf('{{!', 0) === 0) {\n                var after = parseTemplate(afterTag, loopName);\n                return concat([beforeTag, after]);\n            } else if (tag.lastIndexOf('{{/', 0) === 0) {\n                if (tag.slice(3, -2) === loopName) {\n                    var render = function() {\n                        return beforeTag;\n                    };\n                    return [render, afterTag];\n                } else {\n                    throw new Error('unexpected closing loop: ' + tag);\n                }\n            } else {\n                var render = parseVariableTemplate(tag);\n                var after = parseTemplate(afterTag, loopName);\n                return concat([beforeTag, render, after]);\n            }\n        }\n    };\n\n    return function(template, data) {\n        return parseTemplate(template)(data);\n    };\n});\n\n","/**\n * Recreate DOM `source` in `target` by making only small adjustments.\n *\n * *The following section explains details about the current implementation.\n * These are likely to change in the future.*\n *\n * The algorithms is relatively simple. It just iterates through all top level\n * nodes. If a node has a different `nodeType` (e.g. text or element) or a\n * different `nodeName` (e.g. div or ul) it is replaced completely and the\n * algorithm proceeds with the node's children recursively.  Otherwise, only\n * the nodes's attributes are updated.\n *\n * Note that non-attribute properties (e.g. value) are lost in the first case\n * and preserved in the second.\n *\n * If the algorithm encounters an element with the class `muu-isolate` it does\n * not recurse into its children. This way, you can protect dynamically\n * generated content from being overwritten.\n *\n * @module muu-update-dom\n * @param {DOMElement} target\n * @param {DOMElement} source\n */\ndefine('muu-update-dom',['muu-js-helpers'], function(_) {\n    \"use strict\";\n\n    var updateAttributes = function(target, source) {\n        var targetAttrNames = _.map(target.attributes, function(item) {\n            return item.name;\n        });\n        var sourceAttrNames = _.map(source.attributes, function(item) {\n            return item.name;\n        });\n\n        _.forEach(targetAttrNames, function(name) {\n            // NOTE: ie8.js creates some attribute\n            if (!source.hasAttribute(name) && name.substr(0, 7) !== '__IE8__') {\n                target.removeAttribute(name);\n            }\n        });\n        _.forEach(sourceAttrNames, function(name) {\n            if (target.getAttribute(name) !== source.getAttribute(name)) {\n                target.setAttribute(name, source.getAttribute(name));\n            }\n        });\n    };\n\n    var updateDOM = function(target, source) {\n        var nt = target.childNodes.length;\n        var ns = source.childNodes.length;\n\n        if (target.nodeType === source.nodeType && target.nodeName === source.nodeName && target.type === source.type) {\n            if (target.nodeType === 1) {\n                var muuClasses = _.filter(target.classList, function(cls) {\n                    return cls.lastIndexOf('muu-', 0) === 0;\n                });\n                updateAttributes(target, source);\n                _.forEach(muuClasses, function(cls) {\n                    target.classList.add(cls);\n                });\n            } else if (target.nodeType === 3) {\n                target.nodeValue = source.nodeValue;\n            }\n\n            if (target.nodeType !== 1 || !target.classList.contains('muu-isolate')) {\n                for (var i = ns; i < nt; i++) {\n                    target.removeChild(target.childNodes[ns]);\n                }\n                for (i = nt; i < ns; i++) {\n                    target.appendChild(source.childNodes[nt]);\n                }\n                for (i = 0; i < nt && i < ns; i++) {\n                    updateDOM(target.childNodes[i], source.childNodes[i]);\n                }\n            }\n        } else {\n            target.parentNode.replaceChild(source, target);\n        }\n    };\n\n    return updateDOM;\n});\n\n","/**\n * Exports the {@link Directive} class.\n * @module muu-directive\n */\ndefine('muu-directive',['muu-dom-helpers', 'muu-js-helpers', 'muu-update-dom'], function($, _, updateDOM) {\n    \"use strict\";\n\n    /**\n     * A directive is linked to a DOMElement and manages the DOM tree below\n     * that element (excluding any isolated subtrees, e.g. those managed by\n     * subdirectives).\n     *\n     * It provides a set of methods to interact with the managed part of the\n     * DOM. This is separated into three distinct parts:\n     *\n     * - You can push data to the DOM using the {@link Directive#update}\n     *   method. The DOM will than be updated using the template that was\n     *   provided at construction.\n     * - You can get data from the DOM using the {@link Directive#getModel}\n     *   method. This is however restricted to form field by design.\n     * - You can react to DOM events by specifying an alias for them. In the\n     *   template, you might for example add the attribute\n     *   `data-onclick=\"custom\"` to an element. When there is `click` event on\n     *   that element, a `muu-custom` event will be triggered on the\n     *   directive's root element.\n     *\n     * Directives are typically not created directly but via {@link\n     * Registry#link}.\n     *\n     * @constructs Directive\n     * @param {DOMElement} root\n     * @param {string} template\n     * @param {Muu} registry\n     */\n    var Directive = function(root, template, registry) {\n        var self = this;\n\n        root.innerHTML = '<div></div>';\n\n        var eventCallback = function(originalEvent) {\n            var attrName = 'data-on' + originalEvent.type;\n            if (originalEvent.target.hasAttribute(attrName)) {\n                var eventName = originalEvent.target.getAttribute(attrName);\n                var event = $.createEvent('muu-' + eventName, originalEvent);\n                root.dispatchEvent(event);\n            }\n        };\n\n        /**\n         * Rerender `template` with `data` and push the changes to the DOM.\n         *\n         * See {@link module:muu-update-dom} for details. The templating system\n         * can be defined in the {@link Registry}.\n         *\n         * @param {Object.<string, *>} data\n         */\n        this.update = function(data) {\n            var tmp = document.createElement('div');\n            tmp.innerHTML = registry.renderer(template, data);\n\n            updateDOM(root.children[0], tmp);\n\n            _.forEach(['keydown', 'keyup', 'click', 'change', 'search'], function(eventType) {\n                var selector = '[data-on' + eventType + ']';\n                _.forEach(self.querySelectorAll(selector), function(element) {\n                    element.addEventListener(eventType, eventCallback, false);\n                });\n            });\n\n            var updateEvent = $.createEvent('muu-parent-update');\n            var subDirectives = this.querySelectorAll('muu.muu-initialised');\n            _.forEach(subDirectives, function(element) {\n                element.dispatchEvent(updateEvent);\n            });\n\n            registry.linkAll(self);\n        };\n\n        /**\n         * A variant of `querySelectorAll` that returns only elements from\n         * the managed part of the DOM.\n         *\n         * @private\n         * @param {string} selector\n         * @return {DOMElement[]} All child elements that match the given\n         *     selector and are not isolated.\n         */\n        this.querySelectorAll = function(selector) {\n            var hits = root.querySelectorAll(selector);\n\n            // NOTE: querySelectorAll returns all elements in the tree that\n            // match the given selector.  findAll does the same with *relative\n            // selectors* but does not seem to be available yet.\n            var isolations = root.querySelectorAll('.muu-isolate');\n            var isolated = _.union(_.map(isolations, function(isolation) {\n                return isolation.querySelectorAll(selector);\n            }));\n\n            return _.difference(hits, isolated);\n        };\n\n        /**\n         * A variant of `querySelector` that returns only elements from the\n         * managed part of the DOM.\n         *\n         * @private\n         * @param {String} selector\n         * @return {DOMElement} First child element that matches the given\n         *     selector and is not isolated.\n         */\n        this.querySelector = function(selector) {\n            var all = self.querySelectorAll(selector);\n            if (all.length > 0) {\n                return all[0];\n            }\n        };\n\n        /**\n         * Get all model data as a flat object.\n         *\n         * @return {Object.<string, string|number|boolean>}\n         *//**\n         * Get the value of a form input by name.\n         *\n         * In case of a checkbox, returns `boolean`.\n         * In case of radioboxes, returns the value of the selected box.\n         *\n         * @param {string} name\n         * @param {*} [_default]\n         * @return {string|number|boolean|*}\n         */\n        this.getModel = function(name, _default) {\n            if (name === void 0) {\n                var model = {};\n                _.forEach(self.querySelectorAll('[name]'), function(element) {\n                    model[element.name] = self.getModel(element.name);\n                });\n                return model;\n            } else {\n                var element = self.querySelector('[name=' + name + ']');\n                if (element === void 0) {\n                    return _default;\n                } else if (element.type === 'checkbox') {\n                    return element.checked;\n                } else if (element.type === 'radio') {\n                    var options = self.querySelectorAll('[name=' + name + ']');\n                    return $.getRadio(options) || _default;\n                } else {\n                    return element.value;\n                }\n            }\n        };\n\n        /**\n         * Set the value of a form input by name.\n         *\n         * In case of a checkbox, sets `element.checked`.\n         * In case of radioboxes, selects the box with matching value.\n         *\n         * @param {string} name\n         * @param {string|number|boolean} value\n         */\n        this.setModel = function(name, value) {\n            var element = self.querySelector('[name=' + name + ']');\n            if (element.type === 'checkbox') {\n                element.checked = value;\n            } else if (element.type === 'radio') {\n                var options = self.querySelectorAll('[name=' + name + ']');\n                $.setRadio(options, value);\n            } else {\n                element.value = value;\n            }\n        };\n    };\n\n    return Directive;\n});\n\n","/**\n * Exports the {@link Registry} class.\n * @module muu\n */\ndefine('muu',['muu-template', 'muu-directive', 'muu-js-helpers', 'muu-dom-helpers'], function(muuTemplate, Directive, _, $) {\n    \"use strict\";\n\n    /**\n     * @constructs Registry\n     * @param {object} config The config object may have following properties:\n     *\n     * - **debug** - `{boolean}` - Enable debug mode. In debug mode,\n     *   directive objects are available as properties from the DOM as\n     *   `element.directive`.\n     * - **renderer** - `{Function(string, object)}` - The template renderer\n     *   to be used. Defaults to {@link module:muu-template}.\n     */\n    var Registry = function(config) {\n        var self = this;\n        var directives = {};\n\n        this.config = config || {};\n        this.renderer = self.config.renderer || muuTemplate;\n\n        /**\n         * Register a new type of {@link Directive}\n         *\n         * @param {string} type\n         * @param {string} template\n         * @param {Function(Directive, DOMElement): function} link The link\n         *   function is called with an instance of {@link Directive} and a\n         *   DOMElement when {@link Registry#link} is executed.\n         *\n         *   It is the only place where you can access a directive and\n         *   therefore the place where you define its behavior.\n         *\n         *   This typically means to make an initial call to {@link\n         *   Directive#update} and to add some event listeners. You should also\n         *   return an *unlink* function that clears all external references in\n         *   order to avoid memory leaks.\n         * @return {Registry} this\n         */\n        this.registerDirective = function(type, template, link) {\n            directives[type] = {\n                template: template,\n                link: link\n            };\n            return self;\n        };\n\n        /**\n         * Shortcut for wrapping calls to {@link Registry} in a function.\n         *\n         * This can be esepcially helpful if that function is defined in a\n         * different module.\n         *\n         * ```.js\n         * define('foobar', [], function() {\n         *   return function(registry) {\n         *     registry\n         *        .registerDirective('foo', '...', function() {...})\n         *        .registerDirective('bar', '...', function() {...});\n         *   };\n         * });\n         *\n         * require(['foobar'], function(foobar) {\n         *   var registry = new Registry();\n         *   registry.registerModule(foobar);\n         * });\n         * ```\n         *\n         * @param {Function(Registry)}\n         * @return {Registry} this\n         */\n        this.registerModule = function(module) {\n            module(self);\n            return self;\n        };\n\n        /**\n         * Create and initialise a {@link Directive} for `element`.\n         *\n         * @param {DOMElement} element\n         * @param {string} type\n         * @return {Directive}\n         */\n        this.link = function(element, type) {\n            if (type === void 0) {\n                type = element.getAttribute('type');\n            }\n\n            if (!directives.hasOwnProperty(type)) {\n                throw new Error('Unknown directive type: ' + type);\n            }\n\n            var template = directives[type].template;\n            var link = directives[type].link;\n\n            var directive = new Directive(element, template, self);\n            var unlink = link(directive, element);\n            element.classList.add('muu-isolate');\n            element.classList.add('muu-initialised');\n\n            if (self.config.debug) {\n                element.directive = directive;\n            }\n\n            if (unlink !== void 0) {\n                $.destroy(element, unlink);\n            }\n\n            return directive;\n        };\n\n        /**\n         * Link all directives that can be found inside `root`.\n         *\n         * @param {DOMElement} root\n         * @return {Directive[]}\n         */\n        this.linkAll = function(root) {\n            // NOTE: root may be a DOM Node or a directive\n            var elements = _.filter(root.querySelectorAll('muu'), function(element) {\n                return !element.classList.contains('muu-initialised');\n            });\n            return _.map(elements, function(element) {\n                return self.link(element);\n            });\n        };\n    };\n\n    return Registry;\n});\n\n"]}